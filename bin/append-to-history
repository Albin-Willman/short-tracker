#!/usr/bin/env ruby

require 'date'
require 'json'


stock = ARGV[0]
stock_path = File.join(File.dirname(__FILE__), "../dist/api/stocks/#{stock}.json")
data = JSON.parse(File.read(stock_path))
high = ARGV[1]
low = ARGV[2]
last = ARGV[3]
date = ARGV[4] || (Date.today.prev_day).to_s

data['history'][date] = {
  high: high,
  low: low
}

File.open(stock_path, "w") do |f|
  f.write(data.to_json)
end